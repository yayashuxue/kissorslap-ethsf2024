self.addEventListener("push",(t=>{const e=JSON.parse(t.data.text());console.log("Push event received:",e),t.waitUntil(registration.showNotification(e.title,{body:e.message,icon:"/kissorslap-logo.png"}).catch((t=>{console.error("showNotification error:",t)})))})),self.addEventListener("notificationclick",(function(t){t.notification.close(),t.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((function(t){if(t.length>0){let e=t[0];for(let n=0;n<t.length;n++)t[n].focused&&(e=t[n]);return e.focus()}return clients.openWindow("/")})))}));